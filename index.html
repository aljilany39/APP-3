<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modern Accounting System</title>
<style>
:root {
  --primary-color: #1E3A8A;
  --secondary-color: #2563EB;
  --bg-color: #F3F4F6;
  --card-bg: #FFFFFF;
  --text-color: #111827;
  --hover-color: #E0E7FF;
}
body {font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background:var(--bg-color); color:var(--text-color);}
header {background:var(--primary-color); color:white; padding:15px 0; text-align:center; box-shadow:0 2px 4px rgba(0,0,0,0.1);}
nav {display:flex; flex-wrap:wrap; justify-content:center; background:var(--secondary-color);}
nav button {background:var(--secondary-color); color:white; border:none; padding:10px 18px; cursor:pointer; margin:3px; border-radius:5px; transition:0.3s;}
nav button.active, nav button:hover {background:var(--primary-color);}
section {display:none; padding:20px;}
.card {background:var(--card-bg); padding:15px; margin-bottom:20px; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1);}
table {width:100%; border-collapse: collapse; margin-top:10px; border-radius:8px; overflow:hidden;}
th, td {border-bottom:1px solid #E5E7EB; padding:10px; text-align:center;}
th {background:var(--hover-color);}
tr:hover {background:#E0E7FF;}
input, select, button {padding:7px; margin:3px; border-radius:5px; border:1px solid #CBD5E1;}
button {background:var(--primary-color); color:white; border:none; cursor:pointer; transition:0.3s;}
button:hover {background:var(--secondary-color);}
.modal {display:none; position:fixed; z-index:1000; left:0; top:0; width:100%; height:100%; overflow:auto; background:rgba(0,0,0,0.5);}
.modal-content {background:var(--card-bg); margin:10% auto; padding:20px; border-radius:8px; width:90%; max-width:700px; position:relative;}
.modal-content h2 {margin-top:0;}
.close {position:absolute; top:10px; right:15px; font-size:22px; cursor:pointer;}
@media(max-width:768px){ table, th, td {font-size:12px;} nav button {padding:8px 10px;} }
</style>
</head>
<body>

<header><h1>Modern Accounting System</h1></header>

<nav>
  <button class="tabBtn active" onclick="showSection('cash')">Cash</button>
  <button class="tabBtn" onclick="showSection('banks')">Banks</button>
  <button class="tabBtn" onclick="showSection('customers')">Customers</button>
  <button class="tabBtn" onclick="showSection('suppliers')">Suppliers</button>
  <button class="tabBtn" onclick="showSection('orders')">Orders</button>
  <button class="tabBtn" onclick="showSection('goals')">Goals</button>
  <button class="tabBtn" onclick="showSection('shipments')">Shipments</button>
</nav>

<!-- Cash -->
<section id="cash">
  <div class="card">
    <h2>Cash Accounts</h2>
    <input type="text" id="cashName" placeholder="Cash Account Name">
    <input type="number" id="cashAmount" placeholder="Balance">
    <button onclick="addCash()">Add Cash Account</button>
    <table id="cashTable">
      <tr><th>Name</th><th>Balance</th><th>History</th><th>Delete</th></tr>
    </table>
  </div>
</section>

<!-- Banks -->
<section id="banks">
  <div class="card">
    <h2>Bank Accounts</h2>
    <input type="text" id="bankName" placeholder="Bank Account Name">
    <input type="number" id="bankAmount" placeholder="Balance">
    <button onclick="addBank()">Add Bank Account</button>
    <table id="bankTable">
      <tr><th>Name</th><th>Balance</th><th>History</th><th>Delete</th></tr>
    </table>
  </div>
</section>

<!-- Customers -->
<section id="customers">
  <div class="card">
    <h2>Customers</h2>
    <input type="text" id="newCustomerName" placeholder="New Customer Name">
    <button onclick="addCustomerInput()">Add Customer</button>
    <h3>Record Transaction</h3>
    <select id="customerSelect"><option value="">Select Customer</option></select>
    <input type="number" id="customerAmount" placeholder="Amount">
    <select id="customerType">
      <option value="debit">Debit (Receive)</option>
      <option value="credit">Credit (Charge)</option>
    </select>
    <select id="customerPayment"><option value="">Select Cash/Bank</option></select>
    <input type="text" id="customerDesc" placeholder="Description">
    <button onclick="recordCustomerTransaction()">Record Transaction</button>
    <h3>Customer Balances</h3>
    <table id="customerTable">
      <tr><th>Name</th><th>Balance</th><th>History</th></tr>
    </table>
  </div>
</section>

<!-- Suppliers -->
<section id="suppliers">
  <div class="card">
    <h2>Suppliers</h2>
    <input type="text" id="newSupplierName" placeholder="New Supplier Name">
    <button onclick="addSupplierInput()">Add Supplier</button>
    <h3>Record Transaction</h3>
    <select id="supplierSelect"><option value="">Select Supplier</option></select>
    <input type="number" id="supplierAmount" placeholder="Amount">
    <select id="supplierType">
      <option value="debit">Debit (Charge)</option>
      <option value="credit">Credit (Pay)</option>
    </select>
    <select id="supplierPayment"><option value="">Select Cash/Bank</option></select>
    <input type="text" id="supplierDesc" placeholder="Description">
    <button onclick="recordSupplierTransaction()">Record Transaction</button>
    <h3>Supplier Balances</h3>
    <table id="supplierTable">
      <tr><th>Name</th><th>Balance</th><th>History</th></tr>
    </table>
  </div>
</section>

<!-- Orders -->
<section id="orders">
  <div class="card">
    <h2>Orders</h2>
    <input type="text" id="orderName" placeholder="Order Name">
    <input type="number" id="orderCost" placeholder="Total Cost">
    <input type="number" id="orderAdvance" placeholder="Advance">
    <select id="orderPayment"><option value="">Select Cash/Bank</option></select>
    <input type="text" id="orderDesc" placeholder="Description">
    <button onclick="addOrder()">Add Order</button>
    <table id="orderTable">
      <tr><th>Order</th><th>Total</th><th>Advance</th><th>Payment Account</th><th>Delete</th></tr>
    </table>
  </div>
</section>

<!-- Goals -->
<section id="goals">
  <div class="card">
    <h2>Goals</h2>
    <input type="text" id="goalName" placeholder="New Goal">
    <button onclick="addGoal()">Add Goal</button>
    <table id="goalTable"><tr><th>Goal</th><th>Delete</th></tr></table>
  </div>
</section>

<!-- Shipments -->
<section id="shipments">
  <div class="card">
    <h2>Shipments</h2>
    <input type="text" id="shipmentCompany" placeholder="Add Company">
    <button onclick="addShipmentCompany()">Add Company</button>
    <input type="text" id="shipmentProduct" placeholder="Product Name">
    <input type="number" id="shipmentBoxes" placeholder="Boxes">
    <input type="text" id="shipmentTracking" placeholder="Tracking Number">
    <select id="shipmentCompanySelect"><option value="">Select Company</option></select>
    <button onclick="addShipment()">Add Shipment</button>
    <div id="shipmentTables"></div>
  </div>
</section>

<!-- Modal -->
<div id="historyModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h2 id="modalTitle"></h2>
    <table id="modalTable">
      <tr><th>Date</th><th>Type</th><th>Amount</th><th>Related</th><th>Description</th><th>Balance</th><th>Delete</th></tr>
    </table>
  </div>
</div>

<script>
let cashAccounts=[], bankAccounts=[], customers=[], suppliers=[], ordersList=[], goalsList=[], shipmentCompanies=[], shipments=[];

// Section switch
function showSection(id){
  document.querySelectorAll('section').forEach(s=>s.style.display='none');
  document.getElementById(id).style.display='block';
  document.querySelectorAll('.tabBtn').forEach(b=>b.classList.remove('active'));
  document.querySelector(`button[onclick="showSection('${id}')"]`).classList.add('active');
  updatePaymentOptions();
}
showSection('cash');

// Payment dropdown update
function updatePaymentOptions(){
  let options='';
  cashAccounts.forEach(c=>options+=`<option value="cash-${c.name}">Cash: ${c.name}</option>`);
  bankAccounts.forEach(b=>options+=`<option value="bank-${b.name}">Bank: ${b.name}</option>`);
  document.getElementById('customerPayment').innerHTML='<option value="">Select Cash/Bank</option>'+options;
  document.getElementById('supplierPayment').innerHTML='<option value="">Select Cash/Bank</option>'+options;
  document.getElementById('orderPayment').innerHTML='<option value="">Select Cash/Bank</option>'+options;
}

// Helper: add history entry
function addHistory(account,type,amount,related,desc){
  let date=new Date().toLocaleString();
  account.history.push({type,amount,related,desc,balance:account.amount,date});
}

// Add Cash/Bank
function addCash(){let n=document.getElementById('cashName').value; let a=parseFloat(document.getElementById('cashAmount').value)||0; if(n){cashAccounts.push({name:n,amount:a,history:[]}); renderCash(); updatePaymentOptions(); document.getElementById('cashName').value=''; document.getElementById('cashAmount').value='';}}
function addBank(){let n=document.getElementById('bankName').value; let a=parseFloat(document.getElementById('bankAmount').value)||0; if(n){bankAccounts.push({name:n,amount:a,history:[]}); renderBank(); updatePaymentOptions(); document.getElementById('bankName').value=''; document.getElementById('bankAmount').value='';}}
function renderCash(){let t=document.getElementById('cashTable'); t.innerHTML='<tr><th>Name</th><th>Balance</th><th>History</th><th>Delete</th></tr>'; cashAccounts.forEach((c,i)=>t.innerHTML+=`<tr><td>${c.name}</td><td>${c.amount.toFixed(2)}</td><td><button onclick="viewCashHistory(${i})">View</button></td><td><button onclick="deleteCash(${i})">Delete</button></td></tr>`);}
function renderBank(){let t=document.getElementById('bankTable'); t.innerHTML='<tr><th>Name</th><th>Balance</th><th>History</th><th>Delete</th></tr>'; bankAccounts.forEach((b,i)=>t.innerHTML+=`<tr><td>${b.name}</td><td>${b.amount.toFixed(2)}</td><td><button onclick="viewBankHistory(${i})">View</button></td><td><button onclick="deleteBank(${i})">Delete</button></td></tr>`);}
function deleteCash(i){cashAccounts.splice(i,1); renderCash(); updatePaymentOptions();}
function deleteBank(i){bankAccounts.splice(i,1); renderBank(); updatePaymentOptions();}

// Customers
function addCustomerInput(){let n=document.getElementById('newCustomerName').value;if(!n)return; if(!customers.find(c=>c.name===n)){customers.push({name:n,balance:0,history:[]}); updateCustomerSelect(); renderCustomer(); document.getElementById('newCustomerName').value='';}}
function updateCustomerSelect(){let s=document.getElementById('customerSelect'); s.innerHTML='<option value="">Select Customer</option>'; customers.forEach(c=>s.innerHTML+=`<option value="${c.name}">${c.name}</option>`);}
function renderCustomer(){let t=document.getElementById('customerTable'); t.innerHTML='<tr><th>Name</th><th>Balance</th><th>History</th></tr>'; customers.forEach((c,i)=>t.innerHTML+=`<tr><td>${c.name}</td><td>${c.balance.toFixed(2)}</td><td><button onclick="viewCustomerHistory(${i})">View</button></td></tr>`);}
function recordCustomerTransaction(){
  let name=document.getElementById('customerSelect').value;if(!name){alert('Select Customer'); return;}
  let amount=parseFloat(document.getElementById('customerAmount').value)||0;
  let type=document.getElementById('customerType').value;
  let payment=document.getElementById('customerPayment').value;
  let desc=document.getElementById('customerDesc').value||'';
  if(amount<=0 || !payment){alert('Enter amount and select Cash/Bank');return;}
  let c=customers.find(x=>x.name===name);
  let change=type==='debit'?amount:-amount;
  c.balance+=change;
  let [ptype,pname]=payment.split('-');
  let acc=(ptype==='cash'?cashAccounts:bankAccounts).find(a=>a.name===pname);
  acc.amount+=change;
  addHistory(c,type,amount,payment,desc);
  addHistory(acc,type,amount,name,desc);
  renderCustomer(); renderCash(); renderBank();
  document.getElementById('customerAmount').value=''; document.getElementById('customerDesc').value='';
}

// Suppliers (similar to customers)
function addSupplierInput(){let n=document.getElementById('newSupplierName').value;if(!n)return;if(!suppliers.find(s=>s.name===n)){suppliers.push({name:n,balance:0,history:[]}); updateSupplierSelect(); renderSupplier(); document.getElementById('newSupplierName').value='';}}
function updateSupplierSelect(){let s=document.getElementById('supplierSelect'); s.innerHTML='<option value="">Select Supplier</option>'; suppliers.forEach(c=>s.innerHTML+=`<option value="${c.name}">${c.name}</option>`);}
function renderSupplier(){let t=document.getElementById('supplierTable'); t.innerHTML='<tr><th>Name</th><th>Balance</th><th>History</th></tr>'; suppliers.forEach((s,i)=>t.innerHTML+=`<tr><td>${s.name}</td><td>${s.balance.toFixed(2)}</td><td><button onclick="viewSupplierHistory(${i})">View</button></td></tr>`);}
function recordSupplierTransaction(){
  let name=document.getElementById('supplierSelect').value;if(!name){alert('Select Supplier'); return;}
  let amount=parseFloat(document.getElementById('supplierAmount').value)||0;
  let type=document.getElementById('supplierType').value;
  let payment=document.getElementById('supplierPayment').value;
  let desc=document.getElementById('supplierDesc').value||'';
  if(amount<=0 || !payment){alert('Enter amount and select Cash/Bank');return;}
  let s=suppliers.find(x=>x.name===name);
  let change=type==='debit'?amount:-amount;
  s.balance+=change;
  let [ptype,pname]=payment.split('-');
  let acc=(ptype==='cash'?cashAccounts:bankAccounts).find(a=>a.name===pname);
  acc.amount+=change;
  addHistory(s,type,amount,payment,desc);
  addHistory(acc,type,amount,name,desc);
  renderSupplier(); renderCash(); renderBank();
  document.getElementById('supplierAmount').value=''; document.getElementById('supplierDesc').value='';
}

// Orders (affect cash/bank automatically)
function addOrder(){
  let name=document.getElementById('orderName').value;
  let total=parseFloat(document.getElementById('orderCost').value)||0;
  let advance=parseFloat(document.getElementById('orderAdvance').value)||0;
  let payment=document.getElementById('orderPayment').value;
  let desc=document.getElementById('orderDesc').value||'';
  if(!name || advance<=0 || !payment){alert('Enter order name, advance, and payment'); return;}
  ordersList.push({name,total,advance,payment,desc});
  let [ptype,pname]=payment.split('-');
  let acc=(ptype==='cash'?cashAccounts:bankAccounts).find(a=>a.name===pname);
  acc.amount+=advance;
  addHistory(acc,'debit',advance,name,desc);
  renderOrders();
  renderCash(); renderBank();
  document.getElementById('orderName').value=''; document.getElementById('orderCost').value=''; document.getElementById('orderAdvance').value=''; document.getElementById('orderDesc').value='';
}
function renderOrders(){
  let t=document.getElementById('orderTable'); t.innerHTML='<tr><th>Order</th><th>Total</th><th>Advance</th><th>Payment Account</th><th>Delete</th></tr>';
  ordersList.forEach((o,i)=>t.innerHTML+=`<tr><td>${o.name}</td><td>${o.total.toFixed(2)}</td><td>${o.advance.toFixed(2)}</td><td>${o.payment}</td><td><button onclick="deleteOrder(${i})">Delete</button></td></tr>`);
}
function deleteOrder(i){let o=ordersList[i]; let [ptype,pname]=o.payment.split('-'); let acc=(ptype==='cash'?cashAccounts:bankAccounts).find(a=>a.name===pname); acc.amount-=o.advance; acc.history.pop(); ordersList.splice(i,1); renderOrders(); renderCash(); renderBank();}

// Goals
function addGoal(){let g=document.getElementById('goalName').value;if(!g)return; goalsList.push(g); renderGoals(); document.getElementById('goalName').value='';}
function renderGoals(){let t=document.getElementById('goalTable'); t.innerHTML='<tr><th>Goal</th><th>Delete</th></tr>'; goalsList.forEach((g,i)=>t.innerHTML+=`<tr><td>${g}</td><td><button onclick="deleteGoal(${i})">Delete</button></td></tr>`);}
function deleteGoal(i){goalsList.splice(i,1); renderGoals();}

// Shipments
function addShipmentCompany(){let c=document.getElementById('shipmentCompany').value;if(!c || shipmentCompanies.includes(c))return; shipmentCompanies.push(c); renderShipmentCompanies(); document.getElementById('shipmentCompany').value='';}
function renderShipmentCompanies(){let s=document.getElementById('shipmentCompanySelect'); s.innerHTML='<option value="">Select Company</option>'; shipmentCompanies.forEach(c=>s.innerHTML+=`<option value="${c}">${c}</option>`);}
function addShipment(){let comp=document.getElementById('shipmentCompanySelect').value; if(!comp){alert('Select company'); return;} let prod=document.getElementById('shipmentProduct').value; let boxes=parseInt(document.getElementById('shipmentBoxes').value)||0; let track=document.getElementById('shipmentTracking').value; if(!prod || boxes<=0 || !track){alert('Fill all shipment info'); return;} if(!shipments[comp]) shipments[comp]=[]; shipments[comp].push({prod,boxes,track}); renderShipments(); document.getElementById('shipmentProduct').value=''; document.getElementById('shipmentBoxes').value=''; document.getElementById('shipmentTracking').value='';}
function renderShipments(){let div=document.getElementById('shipmentTables'); div.innerHTML=''; for(let comp in shipments){let html=`<h3>${comp}</h3><table><tr><th>Product</th><th>Boxes</th><th>Tracking</th></tr>`; shipments[comp].forEach(s=>html+=`<tr><td>${s.prod}</td><td>${s.boxes}</td><td>${s.track}</td></tr>`); html+='</table>'; div.innerHTML+=html;}}

// History Modal for Cash/Bank/Customer/Supplier
function viewCashHistory(i){let c=cashAccounts[i]; showHistoryModal(`Cash: ${c.name}`, c.history);}
function viewBankHistory(i){let b=bankAccounts[i]; showHistoryModal(`Bank: ${b.name}`, b.history);}
function viewCustomerHistory(i){let c=customers[i]; showHistoryModal(`Customer: ${c.name}`, c.history);}
function viewSupplierHistory(i){let s=suppliers[i]; showHistoryModal(`Supplier: ${s.name}`, s.history);}
function showHistoryModal(title, history){document.getElementById('modalTitle').innerText=title; let t=document.getElementById('modalTable'); t.innerHTML='<tr><th>Date</th><th>Type</th><th>Amount</th><th>Related</th><th>Description</th><th>Balance</th><th>Delete</th></tr>'; history.forEach((h,i)=>t.innerHTML+=`<tr><td>${h.date}</td><td>${h.type}</td><td>${h.amount.toFixed(2)}</td><td>${h.related}</td><td>${h.desc}</td><td>${h.balance.toFixed(2)}</td><td><button onclick="deleteHistory('${title}',${i})">Delete</button></td></tr>`); document.getElementById('historyModal').style.display='block';}
function closeModal(){document.getElementById('historyModal').style.display='none';}
function deleteHistory(title,i){
  let type=title.split(':')[0].toLowerCase(); let name=title.split(':')[1].trim(); let acc;
  if(type==='cash') acc=cashAccounts.find(a=>a.name===name);
  else if(type==='bank') acc=bankAccounts.find(a=>a.name===name);
  else if(type==='customer') acc=customers.find(a=>a.name===name);
  else if(type==='supplier') acc=suppliers.find(a=>a.name===name);
  let h=acc.history[i];
  // reverse cash/bank if applicable
  if(type==='customer' || type==='supplier'){
    let [ptype,pname]=h.related.split('-'); let a=(ptype==='cash'?cashAccounts:bankAccounts).find(x=>x.name===pname);
    let change=h.type==='debit'? -h.amount:h.amount; a.amount+=change; a.history.pop(); renderCash(); renderBank();
    acc.balance-=h.type==='debit'?h.amount:-h.amount;
  } else { acc.amount-=h.type==='debit'?h.amount:-h.amount; }
  acc.history.splice(i,1); showHistoryModal(title,acc.history); renderCustomer(); renderSupplier(); renderCash(); renderBank();
}
</script>
</body>
</html>
